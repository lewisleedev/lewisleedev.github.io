---
layout: post
---

![Gluetun](img/gluetun.svg)

넷플릭스에 가입 가능한 나이가 되던 생일 새벽이 되자마자 가입했던 기억이 난다. 당시에만 해도(한국에서는) 지금처럼 많은 유저베이스와 컨텐츠가 없었지만 그렇게 다양한 컨텐츠를 쉽게 즐길만한 창구가 없었기때문에 넷플릭스에 아주 만족했다. 지금도 가족들이 넷플릭스를 계속 쓰고있어 결과적으로 2018년 이후로 근 6년간 넷플릭스를 구독하고있다.

그런데 이전보다도 더 많이 쏟아져나오는 컨텐츠들은 그저 그런 와중에 잘 보던 미드가 갑자기 저작권 문제로 내려가버렸다. 물론 정말 셀 수도 없이 많이 본 시리즈지만 나에겐 comfort show라는 이름에 걸맞는 너무 소중한 시리즈였기때문에 넷플릭스에서 사라진 후에 직접 소장을 할 방법을 찾게 되었고, Homelab에 -arr 스택과 Jellyfin을 사용해 매일같이 또 챙겨볼 수 있게 되었다.

넷플릭스가 주는 간편함은 분명 따라올 수가 없다. 하지만 -arr 스택을 한번 구축해두고나선 넷플릭스보다도 훨씬 더 많은 시간을 내 서버에 쓰게 되었다. 거의 대부분의 영화, TV쇼를 자동으로 다운로드하고, 스트리밍까지 하는 과정이 모두 내가 관리 할 수 있다는 점, 그리고 그 관리 소요가 생각보다 매우 적다는 점이 아주 만족스러웠다.

문제는 조금 조심할 부분이 있다는 점인데, 관련 커뮤니티는 VPN 사용을 거의 필수로 본다. 그래서 Docker로 구축한 -arr 스택이 사용하고있는 클라이언트 Transmission을 VPN로  [Gluetun](https://github.com/qdm12/gluetun)이라는 프로젝트를 발견했다. 

대부분의 VPN 회사들의 서버가 이미 등록이 되어있어 다른 컨테이너들 뿐만 아니라 프록시를 사용해 다른 로컬 기기들도 VPN을 거치도록 할 수 있다. Mullvad는 디바이스 개수 제한이 5개로 그닥 넉넉한 편이 아니라 아주 감사한 기능이다.

프로젝트 페이지의 Docker-compose 파일을 수정해 gluetun 컨테이너를 만든 후, 다른 컨테이너의 네트워크를 gluetun을 통하도록 아래처럼 추가하면 된다:

```
--network=container:gluetun # Change container name accordingly
```

HTTP/Shadowsocks 프록시를 사용하기 위해서는 몇가지 env와 포트 설정이 필요하다.

```
-e HTTPPROXY=on
-p 8888:8888/tcp
# or
-e SHADOWSOCKS=on
-p 8388:8388/tcp
-p 8388:8388/udp
```

